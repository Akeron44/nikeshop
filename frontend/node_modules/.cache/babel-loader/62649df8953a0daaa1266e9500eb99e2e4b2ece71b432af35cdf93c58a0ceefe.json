{"ast":null,"code":"var _jsxFileName = \"/Users/akeronallkushi/Desktop/REACT/My portfolio/Nike Backend/frontend/src/pages/AuthPage.js\",\n  _s = $RefreshSig$();\nimport { Form, Link, useActionData, useSearchParams, redirect, json, useNavigation } from \"react-router-dom\";\nimport classes from \"./AuthPage.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AuthPage = () => {\n  _s();\n  const [searchParams] = useSearchParams();\n  const isSignUp = searchParams.get(\"mode\") === \"signup\";\n  const navigation = useNavigation();\n  const submitting = navigation.state === \"submitting\";\n  const actionData = useActionData();\n  let buttonName;\n  if (isSignUp) {\n    buttonName = \"Sign Up\";\n  } else {\n    buttonName = \"Log in\";\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      method: \"post\",\n      className: classes.form,\n      children: [!isSignUp ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please give in your credentials\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 26\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Create a new user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 67\n      }, this), actionData && actionData.errors && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: classes.errors,\n        children: Object.values(actionData.errors).map(err => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: err\n        }, err, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 49\n      }, this), actionData && /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          \"color\": \"rgb(203, 16, 16)\",\n          \"listStyle\": \"none\"\n        },\n        children: actionData.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"email\",\n          name: \"email\",\n          placeholder: \"Email-address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: classes.link,\n          to: `?mode=${isSignUp ? \"login\" : \"signup\"}`,\n          children: isSignUp ? \"Log in\" : \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: submitting,\n          children: submitting ? \"Submitting\" : `${buttonName}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(AuthPage, \"MvOkmufmW6CIxUcxreO49L27F3g=\", false, function () {\n  return [useSearchParams, useNavigation, useActionData];\n});\n_c = AuthPage;\nexport default AuthPage;\nexport const action = async _ref => {\n  let {\n    request,\n    params\n  } = _ref;\n  const search = new URL(request.url).searchParams;\n  const mode = search.get(\"mode\") || \"login\";\n  const formData = await request.formData();\n  const authData = {\n    email: formData.get(\"email\"),\n    password: formData.get(\"password\")\n  };\n  const response = await fetch(\"http://localhost:8080/\" + mode, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\",\n    // try request.method\n    body: JSON.stringify(authData)\n  });\n  if (response.status === 422 || response.status === 421 || response.status === 401) {\n    return response;\n  }\n  ;\n  if (!response.ok) {\n    throw json({\n      message: \"Something went wrong\"\n    }, {\n      status: 500\n    });\n  }\n  ;\n  const resData = await response.json();\n  const token = resData.token;\n  localStorage.setItem(\"token\", token);\n  return redirect(\"/products\");\n};\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["Form","Link","useActionData","useSearchParams","redirect","json","useNavigation","classes","AuthPage","searchParams","isSignUp","get","navigation","submitting","state","actionData","buttonName","form","errors","Object","values","map","err","message","actions","link","action","request","params","search","URL","url","mode","formData","authData","email","password","response","fetch","headers","method","body","JSON","stringify","status","ok","resData","token","localStorage","setItem"],"sources":["/Users/akeronallkushi/Desktop/REACT/My portfolio/Nike Backend/frontend/src/pages/AuthPage.js"],"sourcesContent":["import { Form, Link, useActionData, useSearchParams, redirect, json, useNavigation } from \"react-router-dom\";\nimport classes from \"./AuthPage.module.css\"\n\nconst AuthPage = () => {\n    const [searchParams] = useSearchParams();\n    const isSignUp = searchParams.get(\"mode\") === \"signup\";\n    const navigation = useNavigation();\n    const submitting = navigation.state === \"submitting\"\n    const actionData = useActionData();\n\n    let buttonName;\n    if (isSignUp) {\n        buttonName = \"Sign Up\"\n    } else {\n        buttonName = \"Log in\"\n    }\n\n    return <>\n        <Form method=\"post\" className={classes.form}>\n            {!isSignUp ? <p>Please give in your credentials</p> : <p>Create a new user</p>}\n            {actionData && actionData.errors && <ul className={classes.errors}>{Object.values(actionData.errors).map(err =>\n                <li key={err}>{err}</li>\n            )}</ul>}\n            {actionData && <li style={{ \"color\": \"rgb(203, 16, 16)\", \"listStyle\": \"none\" }}>{actionData.message}</li>}\n            <div>\n                <label htmlFor=\"email\">Email</label>\n                <input type=\"text\" id=\"email\" name=\"email\" placeholder=\"Email-address\" />\n            </div>\n            <div>\n                <label htmlFor=\"password\">Password</label>\n                <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Password\" />\n            </div>\n            <section className={classes.actions}>\n                <Link className={classes.link} to={`?mode=${isSignUp ? \"login\" : \"signup\"}`}>{isSignUp ? \"Log in\" : \"Sign Up\"}</Link>\n                <button disabled={submitting}>{submitting ? \"Submitting\" : `${buttonName}`}</button>\n            </section>\n        </Form>\n    </>\n};\n\nexport default AuthPage;\n\nexport const action = async ({ request, params }) => {\n    const search = new URL(request.url).searchParams;\n    const mode = search.get(\"mode\") || \"login\";\n    const formData = await request.formData();\n    const authData = {\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\")\n    };\n\n    const response = await fetch(\"http://localhost:8080/\" + mode, {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\", // try request.method\n        body: JSON.stringify(authData)\n    });\n\n    if (response.status === 422 || response.status === 421 || response.status === 401) {\n        return response\n    };\n\n    if (!response.ok) {\n        throw json({ message: \"Something went wrong\" }, { status: 500 })\n    };\n\n    const resData = await response.json();\n    const token = resData.token;\n    localStorage.setItem(\"token\", token);\n\n    return redirect(\"/products\")\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}