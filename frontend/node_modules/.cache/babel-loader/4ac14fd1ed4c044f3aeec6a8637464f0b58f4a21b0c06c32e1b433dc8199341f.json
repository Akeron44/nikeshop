{"ast":null,"code":"var _jsxFileName = \"/Users/akeronallkushi/Desktop/REACT/Nike Backend/frontend/src/pages/AuthPage.js\",\n  _s = $RefreshSig$();\nimport { Form, Link, useActionData, useSearchParams, redirect, json, useNavigation } from \"react-router-dom\";\nimport Button from \"../UI/Button\";\nimport classes from \"./AuthPage.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AuthPage = () => {\n  _s();\n  const [searchParams] = useSearchParams();\n  const signup = searchParams.get(\"mode\") === \"signup\" || \"login\";\n  console.log(signup);\n  const navigation = useNavigation();\n  const submitting = navigation.state === \"submitting\";\n  const actionData = useActionData();\n  const authHandler = event => {\n    event.preventDefault();\n    return;\n    // navigate(\"/products\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      method: \"post\",\n      className: classes.form,\n      children: [signup !== \"signup\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 36\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Create new user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 51\n      }, this), actionData && actionData.errors && /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.values(actionData.errors).map(err => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: err\n        }, err, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 98\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 49\n      }, this), actionData && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: actionData.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"email\",\n          name: \"email\",\n          placeholder: \"Email-address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"password\",\n          name: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `?mode=${signup ? \"signup\" : \"login\"}`,\n          children: !signup ? \"login\" : \"signup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: submitting,\n          onSubmit: authHandler,\n          children: submitting ? \"Submitting\" : \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(AuthPage, \"MvOkmufmW6CIxUcxreO49L27F3g=\", false, function () {\n  return [useSearchParams, useNavigation, useActionData];\n});\n_c = AuthPage;\nexport default AuthPage;\nexport const action = async _ref => {\n  let {\n    request,\n    params\n  } = _ref;\n  const searchParams = new URL(request.url).searchParams;\n  const mode = searchParams.get(\"mode\") || \"login\";\n  const formData = await request.formData();\n  const authData = {\n    email: formData.get(\"email\"),\n    password: formData.get(\"password\")\n  };\n  const response = await fetch(\"http://localhost:8080/\" + mode, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\",\n    body: JSON.stringify(authData)\n  });\n  if (response.status === 422 || response.status === 421) {\n    return response;\n  }\n  ;\n  if (!response.ok) {\n    throw json({\n      message: \"Something went wrong\"\n    }, {\n      status: 500\n    });\n  }\n  ;\n  return redirect(\"/products\");\n};\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["Form","Link","useActionData","useSearchParams","redirect","json","useNavigation","Button","classes","AuthPage","searchParams","signup","get","console","log","navigation","submitting","state","actionData","authHandler","event","preventDefault","form","errors","Object","values","map","err","message","actions","action","request","params","URL","url","mode","formData","authData","email","password","response","fetch","headers","method","body","JSON","stringify","status","ok"],"sources":["/Users/akeronallkushi/Desktop/REACT/Nike Backend/frontend/src/pages/AuthPage.js"],"sourcesContent":["import { Form, Link, useActionData, useSearchParams, redirect, json, useNavigation } from \"react-router-dom\";\nimport Button from \"../UI/Button\";\nimport classes from \"./AuthPage.module.css\"\n\nconst AuthPage = () => {\n    const [searchParams] = useSearchParams();\n    const signup = searchParams.get(\"mode\") === \"signup\" || \"login\";\n    console.log(signup);\n    const navigation = useNavigation();\n    const submitting = navigation.state === \"submitting\"\n    const actionData = useActionData();\n\n    const authHandler = event => {\n        event.preventDefault();\n        return\n        // navigate(\"/products\");\n    };\n\n    return <>\n        <Form method=\"post\" className={classes.form}>\n            {/* {!signup &&\n                <>\n                    <div>\n                        <label htmlFor=\"name\">Name*</label>\n                        <input id=\"namr\" name=\"name\" placeholder=\"Name\" />\n                    </div>\n                    <div>\n                        <label htmlFor=\"surname\">Surname*</label>\n                        <input id=\"surname\" name=\"surname\" placeholder=\"Surname\" />\n                    </div>\n                </>} */}\n            {signup !== \"signup\" ? <p>Login</p> : <p>Create new user</p>}\n            {actionData && actionData.errors && <ul>{Object.values(actionData.errors).map(err => <li key={err}>{err}</li>)}</ul>}\n            {actionData && <p>{actionData.message}</p>}\n            <div>\n                <label htmlFor=\"email\">Email</label>\n                <input id=\"email\" name=\"email\" placeholder=\"Email-address\" />\n            </div>\n            <div>\n                <label htmlFor=\"password\">Password</label>\n                <input id=\"password\" name=\"password\" placeholder=\"Password\" />\n            </div>\n            <div className={classes.actions}>\n                <Link to={`?mode=${signup ? \"signup\" : \"login\"}`}>{!signup ? \"login\" : \"signup\"}</Link>\n                <button disabled={submitting} onSubmit={authHandler}>{submitting ? \"Submitting\" : \"Save\"}</button>\n            </div>\n        </Form>\n    </>\n};\n\nexport default AuthPage;\n\nexport const action = async ({ request, params }) => {\n    const searchParams = new URL(request.url).searchParams;\n    const mode = searchParams.get(\"mode\") || \"login\";\n    const formData = await request.formData();\n    const authData = {\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\")\n    };\n\n    const response = await fetch(\"http://localhost:8080/\" + mode, {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\",\n        body: JSON.stringify(authData)\n    });\n\n    if (response.status === 422 || response.status === 421) {\n        return response\n    };\n\n    if (!response.ok) {\n        throw json({ message: \"Something went wrong\" }, { status: 500 })\n    };\n\n    return redirect(\"/products\")\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}