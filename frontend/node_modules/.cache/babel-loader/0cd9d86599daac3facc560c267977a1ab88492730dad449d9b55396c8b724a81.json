{"ast":null,"code":"var _jsxFileName = \"/Users/akeronallkushi/Desktop/REACT/Nike Backend/frontend/src/pages/AuthPage.js\",\n  _s = $RefreshSig$();\nimport { Form, Link, useActionData, useSearchParams, redirect, json, useNavigation } from \"react-router-dom\";\nimport classes from \"./AuthPage.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AuthPage = () => {\n  _s();\n  const [searchParams] = useSearchParams();\n  const isSignUp = searchParams.get(\"mode\") === \"signup\";\n  const navigation = useNavigation();\n  const submitting = navigation.state === \"submitting\";\n  const actionData = useActionData();\n  const authHandler = event => {\n    event.preventDefault();\n    return;\n    // navigate(\"/products\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      method: \"post\",\n      className: classes.form,\n      children: [!isSignUp ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 26\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Create new user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 41\n      }, this), actionData && actionData.errors && /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.values(actionData.errors).map(err => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: err\n        }, err, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 98\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 49\n      }, this), actionData && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: actionData.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"email\",\n          name: \"email\",\n          placeholder: \"Email-address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"password\",\n          name: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: classes.link,\n          to: `?mode=${isSignUp ? \"login\" : \"signup\"}`,\n          children: isSignUp ? \"Log in\" : \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: submitting,\n          onSubmit: authHandler,\n          children: submitting ? \"Submitting\" : \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(AuthPage, \"MvOkmufmW6CIxUcxreO49L27F3g=\", false, function () {\n  return [useSearchParams, useNavigation, useActionData];\n});\n_c = AuthPage;\nexport default AuthPage;\nexport const action = async _ref => {\n  let {\n    request,\n    params\n  } = _ref;\n  const searchParams = new URL(request.url).searchParams;\n  const mode = searchParams.get(\"mode\") || \"login\";\n  const formData = await request.formData();\n  const authData = {\n    email: formData.get(\"email\"),\n    password: formData.get(\"password\")\n  };\n  const response = await fetch(\"http://localhost:8080/\" + mode, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"POST\",\n    body: JSON.stringify(authData)\n  });\n  if (response.status === 422 || response.status === 421) {\n    return response;\n  }\n  ;\n  if (!response.ok) {\n    throw json({\n      message: \"Something went wrong\"\n    }, {\n      status: 500\n    });\n  }\n  ;\n  return redirect(\"/products\");\n};\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["Form","Link","useActionData","useSearchParams","redirect","json","useNavigation","classes","AuthPage","searchParams","isSignUp","get","navigation","submitting","state","actionData","authHandler","event","preventDefault","form","errors","Object","values","map","err","message","actions","link","action","request","params","URL","url","mode","formData","authData","email","password","response","fetch","headers","method","body","JSON","stringify","status","ok"],"sources":["/Users/akeronallkushi/Desktop/REACT/Nike Backend/frontend/src/pages/AuthPage.js"],"sourcesContent":["import { Form, Link, useActionData, useSearchParams, redirect, json, useNavigation } from \"react-router-dom\";\nimport classes from \"./AuthPage.module.css\"\n\nconst AuthPage = () => {\n    const [searchParams] = useSearchParams();\n    const isSignUp = searchParams.get(\"mode\") === \"signup\";\n    const navigation = useNavigation();\n    const submitting = navigation.state === \"submitting\"\n    const actionData = useActionData();\n\n    const authHandler = event => {\n        event.preventDefault();\n        return\n        // navigate(\"/products\");\n    };\n\n    return <>\n        <Form method=\"post\" className={classes.form}>\n            {/* {!signup &&\n                <>\n                    <div>\n                        <label htmlFor=\"name\">Name*</label>\n                        <input id=\"namr\" name=\"name\" placeholder=\"Name\" />\n                    </div>\n                    <div>\n                        <label htmlFor=\"surname\">Surname*</label>\n                        <input id=\"surname\" name=\"surname\" placeholder=\"Surname\" />\n                    </div>\n                </>} */}\n            {!isSignUp ? <p>Login</p> : <p>Create new user</p>}\n            {actionData && actionData.errors && <ul>{Object.values(actionData.errors).map(err => <li key={err}>{err}</li>)}</ul>}\n            {actionData && <p>{actionData.message}</p>}\n            <div>\n                <label htmlFor=\"email\">Email</label>\n                <input id=\"email\" name=\"email\" placeholder=\"Email-address\" />\n            </div>\n            <div>\n                <label htmlFor=\"password\">Password</label>\n                <input id=\"password\" name=\"password\" placeholder=\"Password\" />\n            </div>\n            <section className={classes.actions}>\n                <Link className={classes.link} to={`?mode=${isSignUp ? \"login\" : \"signup\"}`}>{isSignUp ? \"Log in\" : \"Sign Up\"}</Link>\n                <button disabled={submitting} onSubmit={authHandler}>{submitting ? \"Submitting\" : \"Save\"}</button>\n            </section>\n        </Form>\n    </>\n};\n\nexport default AuthPage;\n\nexport const action = async ({ request, params }) => {\n    const searchParams = new URL(request.url).searchParams;\n    const mode = searchParams.get(\"mode\") || \"login\";\n    const formData = await request.formData();\n    const authData = {\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\")\n    };\n\n    const response = await fetch(\"http://localhost:8080/\" + mode, {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\",\n        body: JSON.stringify(authData)\n    });\n\n    if (response.status === 422 || response.status === 421) {\n        return response\n    };\n\n    if (!response.ok) {\n        throw json({ message: \"Something went wrong\" }, { status: 500 })\n    };\n\n    return redirect(\"/products\")\n}"],"mappings":";;AAAA,SAASA,IAAI,EAAEC,IAAI,EAAEC,aAAa,EAAEC,eAAe,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,aAAa,QAAQ,kBAAkB;AAC5G,OAAOC,OAAO,MAAM,uBAAuB;AAAA;AAAA;AAE3C,MAAMC,QAAQ,GAAG,MAAM;EAAA;EACnB,MAAM,CAACC,YAAY,CAAC,GAAGN,eAAe,EAAE;EACxC,MAAMO,QAAQ,GAAGD,YAAY,CAACE,GAAG,CAAC,MAAM,CAAC,KAAK,QAAQ;EACtD,MAAMC,UAAU,GAAGN,aAAa,EAAE;EAClC,MAAMO,UAAU,GAAGD,UAAU,CAACE,KAAK,KAAK,YAAY;EACpD,MAAMC,UAAU,GAAGb,aAAa,EAAE;EAElC,MAAMc,WAAW,GAAGC,KAAK,IAAI;IACzBA,KAAK,CAACC,cAAc,EAAE;IACtB;IACA;EACJ,CAAC;;EAED,oBAAO;IAAA,uBACH,QAAC,IAAI;MAAC,MAAM,EAAC,MAAM;MAAC,SAAS,EAAEX,OAAO,CAACY,IAAK;MAAA,WAYvC,CAACT,QAAQ,gBAAG;QAAA,UAAG;MAAK;QAAA;QAAA;QAAA;MAAA,QAAI,gBAAG;QAAA,UAAG;MAAe;QAAA;QAAA;QAAA;MAAA,QAAI,EACjDK,UAAU,IAAIA,UAAU,CAACK,MAAM,iBAAI;QAAA,UAAKC,MAAM,CAACC,MAAM,CAACP,UAAU,CAACK,MAAM,CAAC,CAACG,GAAG,CAACC,GAAG,iBAAI;UAAA,UAAeA;QAAG,GAATA,GAAG;UAAA;UAAA;UAAA;QAAA,QAAY;MAAC;QAAA;QAAA;QAAA;MAAA,QAAM,EACnHT,UAAU,iBAAI;QAAA,UAAIA,UAAU,CAACU;MAAO;QAAA;QAAA;QAAA;MAAA,QAAK,eAC1C;QAAA,wBACI;UAAO,OAAO,EAAC,OAAO;UAAA,UAAC;QAAK;UAAA;UAAA;UAAA;QAAA,QAAQ,eACpC;UAAO,EAAE,EAAC,OAAO;UAAC,IAAI,EAAC,OAAO;UAAC,WAAW,EAAC;QAAe;UAAA;UAAA;UAAA;QAAA,QAAG;MAAA;QAAA;QAAA;QAAA;MAAA,QAC3D,eACN;QAAA,wBACI;UAAO,OAAO,EAAC,UAAU;UAAA,UAAC;QAAQ;UAAA;UAAA;UAAA;QAAA,QAAQ,eAC1C;UAAO,EAAE,EAAC,UAAU;UAAC,IAAI,EAAC,UAAU;UAAC,WAAW,EAAC;QAAU;UAAA;UAAA;UAAA;QAAA,QAAG;MAAA;QAAA;QAAA;QAAA;MAAA,QAC5D,eACN;QAAS,SAAS,EAAElB,OAAO,CAACmB,OAAQ;QAAA,wBAChC,QAAC,IAAI;UAAC,SAAS,EAAEnB,OAAO,CAACoB,IAAK;UAAC,EAAE,EAAG,SAAQjB,QAAQ,GAAG,OAAO,GAAG,QAAS,EAAE;UAAA,UAAEA,QAAQ,GAAG,QAAQ,GAAG;QAAS;UAAA;UAAA;UAAA;QAAA,QAAQ,eACrH;UAAQ,QAAQ,EAAEG,UAAW;UAAC,QAAQ,EAAEG,WAAY;UAAA,UAAEH,UAAU,GAAG,YAAY,GAAG;QAAM;UAAA;UAAA;UAAA;QAAA,QAAU;MAAA;QAAA;QAAA;QAAA;MAAA,QAC5F;IAAA;MAAA;MAAA;MAAA;IAAA;EACP,iBACR;AACP,CAAC;AAAC,GA3CIL,QAAQ;EAAA,QACaL,eAAe,EAEnBG,aAAa,EAEbJ,aAAa;AAAA;AAAA,KAL9BM,QAAQ;AA6Cd,eAAeA,QAAQ;AAEvB,OAAO,MAAMoB,MAAM,GAAG,cAA+B;EAAA,IAAxB;IAAEC,OAAO;IAAEC;EAAO,CAAC;EAC5C,MAAMrB,YAAY,GAAG,IAAIsB,GAAG,CAACF,OAAO,CAACG,GAAG,CAAC,CAACvB,YAAY;EACtD,MAAMwB,IAAI,GAAGxB,YAAY,CAACE,GAAG,CAAC,MAAM,CAAC,IAAI,OAAO;EAChD,MAAMuB,QAAQ,GAAG,MAAML,OAAO,CAACK,QAAQ,EAAE;EACzC,MAAMC,QAAQ,GAAG;IACbC,KAAK,EAAEF,QAAQ,CAACvB,GAAG,CAAC,OAAO,CAAC;IAC5B0B,QAAQ,EAAEH,QAAQ,CAACvB,GAAG,CAAC,UAAU;EACrC,CAAC;EAED,MAAM2B,QAAQ,GAAG,MAAMC,KAAK,CAAC,wBAAwB,GAAGN,IAAI,EAAE;IAC1DO,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACT,QAAQ;EACjC,CAAC,CAAC;EAEF,IAAIG,QAAQ,CAACO,MAAM,KAAK,GAAG,IAAIP,QAAQ,CAACO,MAAM,KAAK,GAAG,EAAE;IACpD,OAAOP,QAAQ;EACnB;EAAC;EAED,IAAI,CAACA,QAAQ,CAACQ,EAAE,EAAE;IACd,MAAMzC,IAAI,CAAC;MAAEoB,OAAO,EAAE;IAAuB,CAAC,EAAE;MAAEoB,MAAM,EAAE;IAAI,CAAC,CAAC;EACpE;EAAC;EAED,OAAOzC,QAAQ,CAAC,WAAW,CAAC;AAChC,CAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}